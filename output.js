import{importDirectory,cleanupSVG,runSVGO,parseColors,isEmptyColor}from"@iconify/tools";import*as fs from"fs";import{hardcore}from"./config/hardcore.js";let svgFilesFolder="./svg-files",iconSetFile="./output/icon.json",iconListFile="./output/icon-list.json",setPrefix="cnx";(async()=>{let i=await importDirectory(svgFilesFolder,{prefix:setPrefix,o:!0}),r=(i.forEach((r,o)=>{if("icon"===o){o=i.toSVG(r);if(o){try{cleanupSVG(o),hardcore.includes(r)||parseColors(o,{i:"currentColor",l:(o,r,i)=>i?isEmptyColor(i)?i:"currentColor":r}),runSVGO(o)}catch(o){return console.error(`Error parsing ${r}:`,o),void i.remove(r)}i.fromSVG(r,o)}else i.remove(r)}}),i.export());fs.writeFileSync(iconSetFile,JSON.stringify(r,null,2));var o=Object.keys(r.icons).map(o=>`icon-[${r.prefix}--${o}]`);fs.writeFileSync(iconListFile,JSON.stringify(o,null,2))})();